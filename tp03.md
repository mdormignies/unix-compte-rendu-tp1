# unix-compte-rendu-tp3
Cours M. Le Cocq - TP3


# Exercice paramètres

Le script que j'ai écris est le suivant 
<pre>#!/bin/bash

echo "Bonjour, vous avez rentré $# paramètres."

echo "Le nom du script est $0."

if [ $# -ge 3 ]; then
    echo "Le 3ème paramètre est $3."
else
    echo "Il n'y a pas de 3ème paramètre."
fi

echo "Voici la liste des paramètres : $@"</pre>

Pour le créer, j'ai tapé la commande `nano analyse.sh`, puis pour le lancer, `./analyse.sh`.<br>
CEPENDANT, pour l'éxécuter il nous faut des droits d'accès. J'ai donc tapé la commande `chmod +x analyse.sh`.

### RÉSULTAT

<pre>root@server1:~# ./analyse.sh param1 param2 param3 param4
    
Bonjour, vous avez rentré 4 paramètres.
Le nom du script est ./analyse.sh.
Le 3ème paramètre est param3.
Voici la liste des paramètres : param1 param2 param3 param4</pre>

# Exercice vérification du nombre de paramètres

Le script que j'ai écris est le suivant :

<pre>#!/bin/bash

if [ $# -ne 2 ]; then
    echo "Erreur : mettez 2 paramètres svp."
    exit 1
fi

CONCAT="$1$2"

echo "La concaténation des deux mots est : $CONCAT"</pre>

Pour le créer, j'ai tapé la commande `nano concat.sh`, puis pour le lancer, `./concat.sh`.<br>
CEPENDANT, pour l'éxécuter il nous faut des droits d'accès. J'ai donc tapé la commande `chmod +x concat.sh`.

### RÉSULTAT

<pre>root@server1:~# ./concat.sh youpi yay
    
La concaténation des deux mots est : youpiyay</pre>

### RÉSULTAT si erreur

<pre>root@server1:~# ./concat.sh
    
Erreur : mettez 2 paramètres svp.</pre>

# Exercice argument type et droits

Le script que j'ai écris est le suivant 
<pre>#!/bin/bash

if [ $# -ne 1 ]; then
    echo "Erreur : Vous devez passer exactement 1 fichier ou répertoire en paramètre."
    exit 1
fi

FICHIER=$1

# COMMENTAIRE : On vérifie si le fichier ou répertoire existe
if [ ! -e "$FICHIER" ]; then
    echo "Le fichier ou répertoire \"$FICHIER\" n'existe pas."
    exit 1
fi

# COMMENTAIRE : On vérifie le type du paramètre
if [ -d "$FICHIER" ]; then
    echo "Le fichier \"$FICHIER\" est un répertoire."
elif [ -f "$FICHIER" ]; then
    if [ -s "$FICHIER" ]; then
        echo "Le fichier \"$FICHIER\" est un fichier ordinaire qui n'est pas vide."
    else
        echo "Le fichier \"$FICHIER\" est un fichier ordinaire qui est vide."
    fi
else
    echo "Le fichier \"$FICHIER\" est d'un autre type (lien, périphérique, etc.)."
fi

# COMMENTAIRE : On vérifie les permissions de l'user actuel
UTILISATEUR=$(whoami)

echo -n "\"$FICHIER\" est accessible par $UTILISATEUR en "

if [ -r "$FICHIER" ]; then
    echo -n "lecture"
else
    echo -n "pas lecture"
fi

if [ -w "$FICHIER" ]; then
    echo -n ", écriture"
else
    echo -n ", pas écriture"
fi

if [ -x "$FICHIER" ]; then
    echo -n ", exécution"
else
    echo -n ", pas exécution"
fi

echo "."</pre>

Pour le créer, j'ai tapé la commande `nano test-fichier.sh`, puis pour le lancer, `./test-fichier.sh`.<br>
CEPENDANT, pour l'éxécuter il nous faut des droits d'accès. J'ai donc tapé la commande `chmod +x test-fichier.sh`.

### RÉSULTAT si aucun paramètre

<pre>root@server1:~# ./test-fichier.sh

Erreur : Vous devez passer exactement 1 fichier ou répertoire en paramètre.</pre>

### RÉSULTAT si fichier/répertoire inconnu

<pre>root@server1:~# ./test-fichier.sh pasdefichier.sh

Le fichier ou répertoire "pasdefichier.sh" n'existe pas.</pre>

### RÉSULTAT si fichier non vide

<pre>root@server1:~# ./test-fichier.sh analyse.sh

Le fichier "analyse.sh" est un fichier ordinaire qui n'est pas vide.
"analyse.sh" est accessible par root en lecture, écriture, exécution.</pre>

### RÉSULTAT si fichier vide

<pre>root@server1:~# ./test-fichier.sh fichiervide.sh
    
Le fichier "fichiervide.sh" est un fichier ordinaire qui est vide.
"fichiervide.sh" est accessible par root en lecture, écriture, pas exécution.</pre>

### RÉSULTAT si répertoire

<pre>root@server1:~# ./test-fichier.sh /etc
    
Le fichier "/etc" est un répertoire.
"/etc" est accessible par root en lecture, écriture, exécution.</pre>

# Exercice Afficher le contenu d’un répertoire


